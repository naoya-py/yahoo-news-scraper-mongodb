# web_scraper

このプロジェクトは、PlaywrightとPythonを使用してWebサイトからニュース記事をスクレイピングし、データベースに保存するためのツールです。現在、Yahoo!ニュースのスクレイピングに対応しています。

## 特徴

* **Playwrightによる高速スクレイピング:** Playwrightを使用して、JavaScriptをレンダリングした動的なWebページからも効率的にデータを抽出します。
* **堅牢なエラー処理:** リトライ機構とエラーログにより、安定したスクレイピングを実現します。
* **スケジューリング機能:** 定期的にスクレイピングを実行するようにスケジュールを設定できます。
* **変更検知:** Webページの変更を検知し、更新された記事のみを保存する機能を備えています。
* **データのクレンジングと正規化:** 取得したデータからHTMLタグや不要な空白などを除去し、正規化して保存します。
* **ログ出力:** 詳細なログ出力により、スクレイピングの状態を監視できます。
* **設定ファイル:** `config.py` ファイルでスクレイピングの設定をカスタマイズできます。

## インストール

1. 必要なライブラリをインストールします。

`pip install -r requirements.txt`

2. `config.py` ファイルを設定します。

* `DATABASE_URL`: データベースの接続URL
* `SCRAPE_INTERVAL`: スクレイピングの実行間隔（時間）
* `MAX_PAGES`: スクレイピングする最大ページ数
* `SITEURL`: スクレイピング対象のURL
* `yahoo_SELECTORS`: Yahoo!ニュースのスクレイピングのためのセレクタ

## 実行方法

1. メインスクリプトを実行します。

`python main.py`

スクリプトはバックグラウンドで実行され、設定された間隔でスクレイピングタスクを実行します。

## テスト

ユニットテストを実行するには、以下のコマンドを実行します。

`pytest`

## ログ

ログは `application.log` ファイルに出力されます。

## 今後の開発予定

* 他のニュースサイトへの対応
* スクレイピング対象の柔軟な設定
* パフォーマンスの改善

## ライセンス

このプロジェクトはMITライセンスで公開されています。


## 免責事項

このツールは教育目的および個人利用を想定して作成されています。スクレイピング対象のWebサイトの利用規約を遵守し、責任ある利用を心がけてください。過度なアクセスや不正利用は行わないでください。